# 创作导航模块功能定义

## 1. 模块概述

创作导航模块是AI小说创作工具“创世之笔”的核心功能之一，为用户提供创作过程的可视化导航和任务管理工具。该模块旨在帮助用户清晰了解创作进度，合理规划创作任务，激发创作灵感，确保创作过程的顺利进行。

## 2. 核心功能

### 2.1 创作流程图

- **流程可视化**：
  - 以流程图形式展示创作的各个阶段和步骤
  - 标记当前创作所处的位置
  - 显示各阶段的完成情况
  - 支持流程图的缩放和平移

- **创作阶段**：
  - **项目创建**：确定作品基本信息和方向
  - **设定构建**：创建世界观、角色、地点等设定
  - **大纲规划**：制定故事大纲和章节结构
  - **章节创作**：撰写具体章节内容
  - **修改完善**：检查和修改作品内容
  - **作品导出**：导出成品作品

- **快速跳转**：
  - 点击流程图中的阶段可快速跳转到对应功能模块
  - 支持阶段间的直接切换
  - 提供阶段详情和操作建议

- **进度追踪**：
  - 实时更新各阶段的完成进度
  - 显示整体创作进度百分比
  - 提供进度目标和时间预估

### 2.2 今日任务

- **任务生成**：
  - 基于创作目标自动生成今日建议任务
  - 考虑当前创作阶段和进度
  - 平衡任务难度和数量
  - 支持自定义任务生成规则

- **任务类型**：
  - **待写章节**：需要撰写的章节
  - **待完善设定**：需要补充或修改的设定
  - **待回收伏笔**：需要回收的伏笔
  - **待检查内容**：需要检查的章节内容
  - **待处理问题**：需要解决的一致性问题

- **任务管理**：
  - 支持任务的标记（重要/紧急）
  - 支持任务的优先级排序
  - 支持任务的完成和跳过
  - 支持任务的添加和删除

- **任务进度**：
  - 实时显示今日任务的完成情况
  - 提供任务完成的统计数据
  - 支持任务的历史记录查看
  - 提供任务完成的激励机制

### 2.3 灵感激发器

- **灵感类型**：
  - **情节转折建议**：提供故事情节的转折和发展建议
  - **冲突点子**：提供角色冲突和矛盾的创意
  - **对话开场**：提供精彩的对话开场白
  - **场景灵感**：提供生动的场景描写灵感
  - **角色发展**：提供角色成长和变化的建议

- **灵感生成**：
  - 基于当前创作上下文生成针对性建议
  - 考虑作品类型和风格
  - 支持调整灵感的创新性和合理性
  - 支持批量生成多个灵感

- **灵感展示**：
  - 以卡片形式展示灵感建议
  - 提供灵感的详细描述和应用场景
  - 支持灵感的预览和评价
  - 支持灵感的收藏和分享

- **灵感应用**：
  - 支持将灵感直接应用到创作中
  - 提供灵感的修改和调整功能
  - 支持灵感的关联和组合
  - 支持灵感的历史记录查看

## 3. 界面设计

### 3.1 整体布局

- **顶部导航栏**：
  - 模块标题：创作导航
  - 操作按钮：刷新任务、生成灵感、设置
  - 视图切换：流程图视图/任务视图/灵感视图

- **左侧边栏**：
  - 功能导航：创作流程图/今日任务/灵感激发器
  - 筛选条件：按任务类型、优先级等筛选
  - 搜索框：快速搜索任务和灵感

- **主内容区**：
  - 创作流程图（流程图视图）
  - 今日任务列表（任务视图）
  - 灵感卡片网格（灵感视图）

- **右侧边栏**：
  - 创作统计：显示创作进度和数据
  - 智能建议：基于当前状态提供AI建议
  - 操作历史：显示最近的操作记录

### 3.2 核心组件

- **创作流程图组件**：
  - SVG或Canvas绘制的流程图
  - 可交互的阶段节点
  - 进度指示器和状态标记
  - 流程图缩放和平移控件

- **今日任务组件**：
  - 任务列表或看板
  - 任务卡片和状态标记
  - 任务完成和优先级控件
  - 任务统计图表

- **灵感激发器组件**：
  - 灵感卡片网格
  - 灵感类型选择器
  - 灵感生成参数设置
  - 灵感评价和应用控件

## 4. 技术实现

### 4.1 前端实现

- **技术栈**：React + Ant Design + ECharts + SVG/Canvas
- **核心组件**：
  - SVG或Canvas实现创作流程图
  - Ant Design的List、Card、Steps组件构建界面
  - ECharts实现任务进度图表
  - Axios处理API请求

- **交互逻辑**：
  - 实时更新任务状态和进度
  - 动态生成灵感建议
  - 流程图的交互式操作
  - 拖拽功能支持任务排序

### 4.2 后端实现

- **技术栈**：Python + Flask + SQLite + OpenAI API
- **核心功能**：
  - 创作流程管理和进度追踪
  - 任务生成和管理
  - 灵感生成和管理
  - 创作数据的分析和统计

- **API设计**：
  - `GET /api/navigation/flow`：获取创作流程图数据
  - `GET /api/navigation/tasks`：获取今日任务
  - `POST /api/navigation/tasks`：创建新任务
  - `PUT /api/navigation/tasks/<id>`：更新任务状态
  - `POST /api/navigation/inspiration`：生成灵感
  - `GET /api/navigation/inspiration`：获取灵感列表

### 4.3 数据结构

- **创作流程表**：
  | 字段名 | 数据类型 | 描述 |
  |-------|---------|------|
  | id | INTEGER | 流程ID |
  | project_id | INTEGER | 项目ID |
  | current_stage | VARCHAR(50) | 当前阶段 |
  | overall_progress | REAL | 整体进度百分比 |
  | stage_progress | TEXT | 各阶段进度（JSON格式） |
  | last_updated | TIMESTAMP | 最后更新时间 |

- **任务表**：
  | 字段名 | 数据类型 | 描述 |
  |-------|---------|------|
  | id | INTEGER | 任务ID |
  | project_id | INTEGER | 项目ID |
  | title | VARCHAR(255) | 任务标题 |
  | description | TEXT | 任务描述 |
  | type | VARCHAR(50) | 任务类型 |
  | priority | INTEGER | 优先级（1-5） |
  | status | VARCHAR(50) | 状态（未开始/进行中/已完成/已跳过） |
  | due_date | DATE | 截止日期 |
  | created_at | TIMESTAMP | 创建时间 |
  | completed_at | TIMESTAMP | 完成时间 |

- **灵感表**：
  | 字段名 | 数据类型 | 描述 |
  |-------|---------|------|
  | id | INTEGER | 灵感ID |
  | project_id | INTEGER | 项目ID |
  | type | VARCHAR(50) | 灵感类型 |
  | content | TEXT | 灵感内容 |
  | context | TEXT | 生成上下文 |
  | rating | INTEGER | 评分（1-5） |
  | status | VARCHAR(50) | 状态（未使用/已使用/已收藏） |
  | created_at | TIMESTAMP | 创建时间 |
  | used_at | TIMESTAMP | 使用时间 |

## 5. 用户流程

### 5.1 进入创作导航

1. 用户在项目编辑界面点击“创作导航”按钮
2. 系统进入创作导航模块
3. 显示创作流程图视图

### 5.2 使用创作流程图

1. 用户查看创作流程图，了解当前创作阶段和进度
2. 用户点击流程图中的阶段快速跳转到对应功能模块
3. 用户查看各阶段的完成情况
4. 用户根据流程图规划后续创作步骤

### 5.3 管理今日任务

1. 用户在任务视图中查看今日建议任务
2. 用户调整任务优先级和标记
3. 用户点击任务开始处理
4. 用户完成任务后标记为已完成
5. 用户查看任务完成情况和统计数据

### 5.4 使用灵感激发器

1. 用户在灵感视图中点击“生成灵感”按钮
2. 用户选择灵感类型和生成参数
3. 系统生成灵感建议
4. 用户浏览和评价灵感建议
5. 用户选择合适的灵感应用到创作中
6. 用户收藏有价值的灵感

## 6. 功能价值

- **创作规划**：帮助用户清晰规划创作流程，避免迷茫和混乱
- **任务管理**：通过结构化的任务管理，提高创作效率和动力
- **灵感激发**：在创作瓶颈时提供有针对性的灵感建议
- **进度追踪**：实时了解创作进度，调整创作计划
- **方向指引**：为用户提供明确的创作方向和目标

## 7. 未来扩展

- **个性化任务**：基于用户的创作习惯和风格，提供个性化的任务建议
- **团队协作**：支持多用户协作时的任务分配和进度追踪（未来版本）
- **创作日历**：提供月度和年度创作计划和回顾
- **成就系统**：通过完成任务和达成目标获得成就和奖励
- **AI创作导师**：提供更智能、更个性化的创作指导和建议

创作导航模块将成为用户创作旅程的指南针，通过可视化的流程导航、智能的任务管理和激发灵感的功能，帮助用户更有条理、更高效地完成创作过程，实现创作目标。