# 项目创建模块功能定义

## 1. 模块概述

项目创建模块是AI小说创作工具“创世之笔”的入口功能，为用户提供创建新小说项目的完整流程。该模块旨在帮助用户快速启动创作，通过智能辅助和结构化表单，引导用户建立作品的基本框架和创作目标。

## 2. 核心功能

### 2.1 基础信息填写

- **作品信息**：
  - 作品名：小说的标题
  - 笔名：作者的笔名
  - 作品类型：玄幻/言情/悬疑/科幻等预设类型
  - 目标读者：青少年/成人/特定群体等

- **创作方向**：
  - 核心主题：作品的中心思想或价值观
  - 一句话梗概：用一句话概括作品的核心内容
  - 创作风格：华丽/简洁/悬疑/温馨等预设风格
  - 参考作品：可填写类似风格的参考作品

- **表单验证**：
  - 实时验证输入内容的有效性
  - 提供智能建议，如作品名的独特性检查
  - 支持输入历史记录和自动补全

### 2.2 智能开篇生成

- **AI生成**：
  - 根据基础信息自动生成3-5个“黄金开篇”选项
  - 每个开篇包含不同的风格和切入点
  - 支持调整生成参数，如风格倾向、字数范围

- **开篇预览**：
  - 以卡片形式展示每个开篇选项
  - 提供开篇的风格标签和适用场景
  - 支持实时预览开篇效果

- **开篇选择**：
  - 可选择一个开篇作为项目的起始点
  - 支持对选择的开篇进行修改和调整
  - 支持保存未选择的开篇到素材库

### 2.3 目标设定

- **字数目标**：
  - 每日目标字数：设定每天的创作字数目标
  - 总目标字数：设定整个项目的总字数目标
  - 智能建议：基于作品类型和长度提供合理的目标建议

- **时间目标**：
  - 预计完成时间：设定项目的预计完成日期
  - 创作周期：设定创作的时间周期（如每天/每周的创作时间）
  - 进度追踪：根据目标自动计算并显示进度

- **目标管理**：
  - 支持修改已设定的目标
  - 提供目标达成情况的统计和分析
  - 支持设置提醒和激励机制

### 2.4 情绪板

- **视觉参考**：
  - 支持上传参考图片，建立作品的视觉风格
  - 提供图片搜索功能，基于作品主题推荐相关图片
  - 支持从网络导入图片或从本地文件选择

- **图片管理**：
  - 支持图片拖拽排序和分类
  - 支持为图片添加标签和描述
  - 支持图片预览和放大查看

- **风格分析**：
  - 基于上传的图片分析作品的视觉风格
  - 生成风格关键词，如“暗黑系”、“治愈系”等
  - 为后续的AI生成提供风格参考

## 3. 界面设计

### 3.1 整体布局

- **顶部导航栏**：
  - 模块标题：创建新项目
  - 操作按钮：保存、取消、上一步、下一步
  - 进度指示器：显示当前步骤和总步骤数

- **主内容区**：
  - 多步骤表单：分为基础信息、智能开篇、目标设定、情绪板四个步骤
  - 每步骤包含相应的表单和组件
  - 支持步骤之间的快速切换

- **右侧边栏**：
  - 创作提示：基于当前步骤提供创作建议
  - 示例参考：展示优秀的作品信息、开篇示例等
  - 帮助信息：提供当前功能的使用说明

### 3.2 核心组件

- **基础信息表单**：
  - 输入框：作品名、笔名等文本输入
  - 下拉选择器：作品类型、目标读者等预设选项
  - 文本域：核心主题、一句话梗概等多行文本输入
  - 标签选择器：创作风格等多标签选择

- **智能开篇生成器**：
  - 生成按钮：触发AI生成开篇
  - 开篇卡片：展示生成的开篇内容
  - 风格标签：显示每个开篇的风格特点
  - 选择按钮：选择开篇作为项目起始点

- **目标设定组件**：
  - 滑块组件：设定每日/总目标字数
  - 日期选择器：设定预计完成时间
  - 进度条：实时显示目标完成情况
  - 智能建议提示：基于作品类型提供目标建议

- **情绪板组件**：
  - 图片上传区域：支持拖拽上传图片
  - 图片网格：展示已上传的参考图片
  - 图片编辑器：支持对图片进行简单编辑
  - 风格分析结果：显示基于图片的风格分析

## 4. 技术实现

### 4.1 前端实现

- **技术栈**：React + Ant Design + React-DnD
- **核心组件**：
  - Ant Design的Form、Input、Select、Upload等组件构建表单
  - React-DnD实现情绪板图片拖拽排序
  - 自定义进度指示器组件

- **交互逻辑**：
  - 多步骤表单的状态管理和验证
  - AI生成请求的异步处理和加载状态
  - 图片上传和处理的前端逻辑

### 4.2 后端实现

- **技术栈**：Python + Flask + OpenAI API
- **核心功能**：
  - 项目数据的创建和存储
  - 调用OpenAI API生成智能开篇
  - 处理图片上传和存储
  - 目标设定的计算和分析

- **API设计**：
  - `POST /api/projects`：创建新项目
  - `POST /api/ai/generate_opening`：生成智能开篇
  - `POST /api/projects/<id>/emotion_board`：上传情绪板图片

### 4.3 数据结构

- **项目表**：
  | 字段名 | 数据类型 | 描述 |
  |-------|---------|------|
  | id | INTEGER | 项目ID |
  | title | VARCHAR(255) | 作品名 |
  | pen_name | VARCHAR(255) | 笔名 |
  | genre | VARCHAR(100) | 作品类型 |
  | target_audience | VARCHAR(100) | 目标读者 |
  | core_theme | TEXT | 核心主题 |
  | synopsis | TEXT | 一句话梗概 |
  | writing_style | VARCHAR(100) | 创作风格 |
  | reference_works | TEXT | 参考作品 |
  | daily_word_goal | INTEGER | 每日目标字数 |
  | total_word_goal | INTEGER | 总目标字数 |
  | estimated_completion_date | DATE | 预计完成时间 |
  | created_at | TIMESTAMP | 创建时间 |
  | updated_at | TIMESTAMP | 更新时间 |

- **情绪板表**：
  | 字段名 | 数据类型 | 描述 |
  |-------|---------|------|
  | id | INTEGER | 情绪板ID |
  | project_id | INTEGER | 项目ID |
  | image_url | TEXT | 图片URL |
  | description | TEXT | 图片描述 |
  | tags | TEXT | 图片标签 |
  | order_index | INTEGER | 排序索引 |
  | created_at | TIMESTAMP | 创建时间 |

## 5. 用户流程

### 5.1 进入项目创建

1. 用户在项目看板模块点击“新建项目”按钮
2. 系统进入项目创建模块，显示第一步：基础信息填写
3. 用户开始填写项目的基本信息

### 5.2 填写基础信息

1. 用户填写作品名、笔名、作品类型等基本信息
2. 用户填写核心主题、一句话梗概等创作方向
3. 系统实时验证输入内容并提供智能建议
4. 用户点击“下一步”按钮进入智能开篇生成步骤

### 5.3 生成智能开篇

1. 系统根据已填写的基础信息自动生成3-5个开篇选项
2. 用户浏览并预览各个开篇选项
3. 用户选择一个开篇作为项目的起始点
4. 用户可以对选择的开篇进行修改和调整
5. 用户点击“下一步”按钮进入目标设定步骤

### 5.4 设定创作目标

1. 用户设定每日目标字数和总目标字数
2. 用户设定预计完成时间和创作周期
3. 系统基于设定的目标计算进度和预计达成情况
4. 用户点击“下一步”按钮进入情绪板步骤

### 5.5 创建情绪板

1. 用户上传参考图片，建立作品的视觉风格
2. 用户对上传的图片进行排序和分类
3. 系统基于图片分析作品的视觉风格并生成风格关键词
4. 用户点击“完成”按钮，完成项目创建

### 5.6 完成项目创建

1. 系统保存项目信息并创建新项目
2. 系统自动跳转到新项目的编辑界面
3. 用户开始进行具体的创作工作

## 6. 功能价值

- **快速启动**：通过结构化的流程帮助用户快速启动创作项目
- **智能辅助**：利用AI生成开篇和提供建议，降低创作门槛
- **目标导向**：通过设定明确的创作目标，提高创作动力和效率
- **视觉参考**：通过情绪板建立作品的视觉风格，为创作提供参考
- **数据基础**：为后续的创作和分析提供基础数据支持

## 7. 未来扩展

- **模板选择**：提供不同类型的项目模板，如“玄幻小说模板”、“言情小说模板”等
- **创作问卷调查**：通过问卷形式更深入地了解用户的创作需求和风格
- **AI作品命名**：基于核心主题和风格自动生成作品名建议
- **创作资源推荐**：基于作品类型推荐相关的创作资源和参考资料
- **团队协作**：支持多人共同创建和编辑项目（未来版本）

项目创建模块将成为用户开启创作之旅的第一步，通过智能辅助和结构化流程，帮助用户快速建立作品框架，为后续的深入创作奠定基础。