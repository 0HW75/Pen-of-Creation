## 完善关联网络功能计划

### 阶段一：后端 API 完善
1. **优化关系网络数据接口** `/network/<world_id>`
   - 为节点添加实体名称、类型图标等显示信息
   - 支持按实体类型筛选
   - 添加关系类型统计

2. **添加缺失的 API 路由注册检查**
   - 确认 `tags_relations_bp` 已注册到 Flask 应用

### 阶段二：前端 API 服务完善
在 `api.js` 中添加：
1. **标签 API**
   - `tagsRelationsApi.getTags(worldId)`
   - `tagsRelationsApi.createTag(data)`
   - `tagsRelationsApi.updateTag(id, data)`
   - `tagsRelationsApi.deleteTag(id)`

2. **实体标签关联 API**
   - `tagsRelationsApi.getEntityTags(params)`
   - `tagsRelationsApi.createEntityTag(data)`
   - `tagsRelationsApi.deleteEntityTag(id)`

3. **实体关系 API**
   - `tagsRelationsApi.getRelations(worldId)`
   - `tagsRelationsApi.createRelation(data)`
   - `tagsRelationsApi.updateRelation(id, data)`
   - `tagsRelationsApi.deleteRelation(id)`
   - `tagsRelationsApi.getRelationNetwork(worldId)` - 获取网络图数据

### 阶段三：关系网络可视化组件开发
1. **创建 RelationNetworkGraph 组件**
   - 使用 ECharts 的 graph 类型
   - 支持力导向布局
   - 节点按实体类型显示不同颜色/图标
   - 边显示关系类型标签
   - 支持节点拖拽、缩放

2. **集成到 RelationsPanel**
   - 替换现有的 Empty 占位符
   - 添加加载状态
   - 添加刷新按钮

### 阶段四：快速关联功能实现
1. **创建 QuickRelationModal 组件**
   - 角色加入势力
   - 物品分配持有者
   - 角色移动到地点
   - 势力占领地点

2. **绑定点击事件**
   - 点击快速关联项弹出对应模态框
   - 选择源实体和目标实体
   - 设置关系类型和强度

### 阶段五：实体关系管理界面
1. **创建 RelationManagement 组件**
   - 关系列表展示（表格形式）
   - 创建关系表单
   - 编辑关系
   - 删除关系
   - 按实体类型/关系类型筛选

### 阶段六：实体详情页添加关系展示
1. **在角色详情页添加**
   - 显示该角色的所有关系
   - 添加快捷创建关系入口

2. **在势力/地点/物品详情页同样添加**

---

## 预期效果
- ✅ 关系网络图可以可视化展示角色、势力、地点、物品之间的关联
- ✅ 支持通过快速操作创建实体间关系
- ✅ 可以在管理界面查看和编辑所有关系
- ✅ 实体详情页显示其关联关系
- ✅ 支持标签系统对实体进行分类

请确认这个计划后，我将开始逐步实施。